// Generated by CoffeeScript 1.4.0
(function() {

  define(['Util', 'Facebook'], function(Util, Facebook) {
    var AfterStatuses;
    AfterStatuses = (function() {

      function AfterStatuses() {}

      AfterStatuses.prototype["do"] = function(statuses, step, score, $result) {
        var point, self;
        self = this;
        self.statusesStats = Util.getStatusesStats(statuses);
        if (self.statusesStats.totalOfStatuses > 300) {
          point = 3;
        } else if (self.statusesStats.totalOfStatuses > 200) {
          point = 2;
        } else if (self.statusesStats.totalOfStatuses > 100) {
          point = 1;
        } else {
          point = 0;
        }
        if (point !== 0) {
          Util.addScore(point, step);
        }
        score.activity.push(point);
        Util.renderTemplate('tpl-step-4', $result, {
          statuses: self.statusesStats
        });
        Util.setThisDone($result);
        Util.scrollTo($result);
        Util.fadeIn($('.need-are-you-active'));
        $('.step-5').click(function() {
          step = this;
          $result = Util.getResultDiv(this);
          if (self.statusesStats.averageLikes > 4 || self.statusesStats.averageComments > 4) {
            point = 3;
          } else if (self.statusesStats.averageLikes > 3 || self.statusesStats.averageComments > 3) {
            point = 2;
          } else if (self.statusesStats.averageLikes > 2 || self.statusesStats.averageComments > 2) {
            point = 1;
          } else {
            point = 0;
          }
          if (point !== 0) {
            Util.addScore(point, step);
          }
          score.popularity.push(point);
          Util.renderTemplate('tpl-step-5', $result, {
            statuses: self.statusesStats
          });
          Util.setThisDone($result);
          return Util.scrollTo($result);
        });
        return $('.step-6').click(function() {
          $result = Util.getResultDiv(this);
          Util.renderTemplate('tpl-step-6', $result, {
            statuses: self.statusesStats.twoBestStatuses
          });
          Util.setThisDone($result);
          Util.scrollTo($result);
          return Util.fadeIn($('.need-best-statuses'));
        });
      };

      return AfterStatuses;

    })();
    return new AfterStatuses;
  });

}).call(this);
