// Generated by CoffeeScript 1.4.0
(function() {

  define(['Util', 'Facebook'], function(Util, Facebook) {
    var AfterPhotos;
    AfterPhotos = (function() {

      function AfterPhotos() {}

      AfterPhotos.prototype["do"] = function(photos, albums, userId, $result) {
        var self;
        self = this;
        self.photosStats = Util.getPhotosStats(albums, photos, userId);
        $result.html('\
        <ul>\
          <li>' + self.photosStats.twoBestTaggers.first.name + '</li>\
          <li>' + self.photosStats.twoBestTaggers.second.name + '</li>\
        </ul>');
        Util.setThisDone($result);
        Util.fadeIn($('.need-photos'));
        $('.step-8').click(function() {
          $result = Util.getResultDiv(this);
          Util.displayProgressBar($result);
          $result.html('<p>You have ' + self.photosStats.numberOfPics + ' pictures</p>');
          return Util.setThisDone($result);
        });
        return $('.step-9').click(function() {
          $result = Util.getResultDiv(this);
          Util.displayAjaxLoader($result);
          $result.html('\
          <div class="span2">\
            <p><img src="' + self.photosStats.twoMostFamousPics.first.name + '" alt="First most famous picture" /><br />' + self.photosStats.twoMostFamousPics.first.value + ' likes</p>\
          </div>\
          <div class="span2">\
            <p><img src="' + self.photosStats.twoMostFamousPics.second.name + '" alt="Second most famous picture" /><br />' + self.photosStats.twoMostFamousPics.second.value + ' likes</p>\
          </div>\
        ');
          return Util.setThisDone($result);
        });
      };

      return AfterPhotos;

    })();
    return new AfterPhotos;
  });

}).call(this);
